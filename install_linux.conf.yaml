- shell:
    - [git submodule update --init --recursive, Installing submodules]

- defaults:
    link:
      create: true # Create parent directories as needed

- clean: # Remove dead links
    "${HOME}/":
    "${XDG_CONFIG_HOME}/":
      recursive: true
    "${XDG_DATA_HOME}/":
      recursive: true
    "${SM_XDG_BIN_BIN_HOME}/":
      recursive: true

- link:
    "${XDG_CONFIG_HOME}/lazygit/config.yml": lazygit-config.yaml
    "${XDG_CONFIG_HOME}/nvim": nvim
    "${XDG_CONFIG_HOME}/bat/config": batconfig
    "${XDG_CONFIG_HOME}/git/config": git/config
    "${XDG_CONFIG_HOME}/git/ignore": git/ignore
    "${NPM_CONFIG_USERCONFIG}": npmrc
    "${PYTHONSTARTUP}": pythonrc
    "${RIPGREP_CONFIG_PATH}": ripgreprc
    "${STARSHIP_CONFIG}": starship.toml
    "${XDG_CONFIG_HOME}/tmux/tmux.conf": tmux.conf
    "${XDG_CONFIG_HOME}/wezterm/wezterm.lua": wezterm.lua
    "${SM_XDG_BIN_BIN_HOME}": bin
    "${HOME}/.zshrc": zshrc
    "${ZSHRC_LOCAL_FILE}": zshrc_local
    "${HOME}/Brewfile": brewfile_linux

# Setup TMUX plugin manager
- shell:
    - command: TPM_DIR=${XDG_CONFIG_HOME}/tmux/plugins/tpm; git -C "$TPM_DIR" pull || git clone git@github.com:tmux-plugins/tpm.git "$TPM_DIR"
      description: Install TMUX plugin manager. To install TMUX plugins, open TMUX and press `prefix + I`
      quiet: true
      stderr: true

- shell:
    - command: tempfile=$(mktemp) && curl -o $tempfile https://raw.githubusercontent.com/wez/wezterm/master/termwiz/data/wezterm.terminfo && tic -x -o ~/.local/share/terminfo $tempfile && rm $tempfile
      description: Install wezterm terminfo file
      quiet: true
      stderr: true

- shell:
    - command: fzf --zsh > $HOME/.fzf.zsh
      description: Setting up fzf auto-completion, like backwards search, for Zsh
      quiet: true
      stdout: true
      stderr: true
