- shell:
    - [git submodule update --init --recursive, Installing submodules]

- defaults:
    link:
      create: true # Create parent directories as needed

- clean: # Remove dead links
    "${HOME}/":
    "${XDG_CONFIG_HOME}/":
    "${XDG_DATA_HOME}/":
      recursive: true

- link:
    "${XDG_DATA_HOME}/cargo/config.toml": cargoconfig.toml
    "${XDG_CONFIG_HOME}/lazygit/config.yml": lazygitconfig.yaml
    "${XDG_CONFIG_HOME}/nvim": neovim/NvChad
    "${XDG_CONFIG_HOME}/nvim/lua/custom": neovim/custom
    "${XDG_CONFIG_HOME}/alacritty/alacritty.toml": alacritty.toml
    "${XDG_CONFIG_HOME}/bat/config": batconfig
    "${XDG_CONFIG_HOME}/git/config": gitconfig
    "${XDG_CONFIG_HOME}/hammerspoon/init.lua": hammerspoon_init.lua
    "${XDG_CONFIG_HOME}/npm/npmrc": npmrc
    "${XDG_CONFIG_HOME}/p10k.zsh": p10k.zsh
    "${XDG_CONFIG_HOME}/python/pythonrc": pythonrc
    "${XDG_CONFIG_HOME}/tmux/tmux.conf": tmux.conf
    "${HOME}/.zshrc": zshrc
    "${HOME}/Brewfile": brewfile_macos

    # Make Home and End keys Windows-like, needs reboot
    "${HOME}/Library/KeyBindings/DefaultKeyBinding.dict": DefaultKeyBinding.dict

- shell:
    - command: brew bundle install --file=$HOME/Brewfile
      description: Installing homebrew packages
      quiet: true
      stdin: true
      stderr: true

- shell:
    - command: defaults write org.hammerspoon.Hammerspoon MJConfigFile "${XDG_CONFIG_HOME}/hammerspoon/init.lua"
      description: Updating Hammerspoon to use portable configuration
      quiet: true
      stdin: true
      stderr: true

- shell:
    - command: TPM_DIR=${XDG_CONFIG_HOME}/tmux/plugins/tpm; git -C "$TPM_DIR" pull || git clone git@github.com:tmux-plugins/tpm.git "$TPM_DIR"
      description: Installing TMUX plugin manager. To install TMUX plugins, open TMUX and press `prefix + I`
      quiet: true
      stdin: true
      stderr: true
